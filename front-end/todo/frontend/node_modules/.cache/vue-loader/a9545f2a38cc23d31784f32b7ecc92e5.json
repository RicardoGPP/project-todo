{"remainingRequest":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/rperandre/other-projects/project-todo/front-end/todo/frontend/src/components/todo-table/TodoTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/src/components/todo-table/TodoTable.vue","mtime":1574442239243},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUb2RvSW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL3RvZG8taW5wdXQvVG9kb0lucHV0JzsKaW1wb3J0IFRvZG9UYWJsZVBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL3RvZG8tdGFibGUvVG9kb1RhYmxlUGFnaW5hdGlvbic7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7IFRvZG9JbnB1dCwgVG9kb1RhYmxlUGFnaW5hdGlvbiB9LAogICAgcHJvcHM6IHsKICAgICAgICBmaWVsZHM6IHsKICAgICAgICAgICAgdHlwZTogQXJyYXksCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBpdGVtczogewogICAgICAgICAgICB0eXBlOiBBcnJheSwKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHNlYXJjaGFibGU6IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHBhZ2luYXRlZDogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcGFnZVNpemU6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICBkZWZhdWx0OiAxMCwKICAgICAgICAgICAgdmFsaWRhdG9yOiAodmFsdWUpID0+IFs1LCAxMCwgMjBdLmZpbmQoc2l6ZSA9PiB2YWx1ZSA9PT0gc2l6ZSkKICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpbnRlcm5hbFNlYXJjaFRlcm06ICcnLAogICAgICAgICAgICBpbnRlcm5hbEl0ZW1zOiB0aGlzLml0ZW1zLAogICAgICAgICAgICBpbnRlcm5hbFBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgICBpbnRlcm5hbEN1cnJlbnRQYWdlOiAxLAogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHBhZ2VzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFBhZ2VTaXplICE9IDAgCiAgICAgICAgICAgICAgICA/IE1hdGguY2VpbCh0aGlzLml0ZW1zLmxlbmd0aCAvIHRoaXMuaW50ZXJuYWxQYWdlU2l6ZSkKICAgICAgICAgICAgICAgIDogMTsKICAgICAgICB9LAogICAgICAgIHNlYXJjaGVkKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFNlYXJjaFRlcm0gIT0gJyc7CiAgICAgICAgfSwKICAgICAgICBoYXNEYXRhKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbEl0ZW1zLmxlbmd0aCA+IDA7CiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgaXRlbXMoKSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YSgpOwogICAgICAgIH0sCiAgICAgICAgaW50ZXJuYWxTZWFyY2hUZXJtKCkgewogICAgICAgICAgICB0aGlzLnNlYXJjaCgpOwogICAgICAgIH0sCiAgICAgICAgaW50ZXJuYWxDdXJyZW50UGFnZSgpIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhKCk7CiAgICAgICAgfSwKICAgICAgICBpbnRlcm5hbFBhZ2VTaXplKCkgewogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGEoKTsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHVwZGF0ZURhdGEoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5wYWdpbmF0ZWQgfHwgdGhpcy5pbnRlcm5hbFBhZ2VTaXplID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmludGVybmFsSXRlbXMgPSB0aGlzLml0ZW1zOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IAoKICAgICAgICAgICAgbGV0IGVuZCA9IHRoaXMuaW50ZXJuYWxDdXJyZW50UGFnZSAqIHRoaXMuaW50ZXJuYWxQYWdlU2l6ZTsKICAgICAgICAgICAgbGV0IGJlZ2luID0gKHRoaXMuaW50ZXJuYWxDdXJyZW50UGFnZSAqIHRoaXMuaW50ZXJuYWxQYWdlU2l6ZSkgLSB0aGlzLmludGVybmFsUGFnZVNpemU7CiAgICAgICAgICAgIAogICAgICAgICAgICB0aGlzLmludGVybmFsSXRlbXMgPSB0aGlzLml0ZW1zLnNsaWNlKGJlZ2luLCBlbmQpOwogICAgICAgIH0sCiAgICAgICAgc2VhcmNoKCkgewogICAgICAgICAgICB0aGlzLmludGVybmFsU2VhcmNoVGVybS5sZW5ndGggPT09IDAKICAgICAgICAgICAgICAgID8gdGhpcy51cGRhdGVEYXRhKCkKICAgICAgICAgICAgICAgIDogdGhpcy5pbnRlcm5hbEl0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwcm9wIGluIGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcoaXRlbVtwcm9wXSkudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKHRoaXMuaW50ZXJuYWxTZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICByb3dDbGlja2VkKGl0ZW0pIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnb25Sb3dDbGljaycsIGl0ZW0pOwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAoIXRoaXMuaGFzRGF0YSkgewogICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbEN1cnJlbnRQYWdlID0gMAogICAgICAgICAgICB9ICAgICAgICAgICAgCiAgICAgICAgfSwgMTAwKTsKICAgIH0KCn0K"},{"version":3,"sources":["TodoTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"TodoTable.vue","sourceRoot":"src/components/todo-table","sourcesContent":["<template>\n  <div class=\"todo-table-container\">\n\n    <TodoInput \n        id=\"todo-search\" \n        :value.sync=\"internalSearchTerm\" \n        :isSearch=\"true\"\n    />\n\n    <table class=\"todo-table\">\n\n        <!-- Header -->\n        <thead>\n            <th v-for=\"field in fields\" :key=\"field.name\">\n                <slot name=\"table-col\" :field=\"field\">\n                    {{field.label}}\n                </slot>\n            </th>\n        </thead>\n\n        <!-- Data -->\n        <tbody>\n            <template v-if=\"hasData\">\n                <tr v-for=\"(item, itemIndex) in internalItems\" :key=\"`tr_${itemIndex}`\" @click.stop=\"rowClicked(item)\">\n                    <td v-for=\"(field, fieldIndex) in fields\" :key=\"`td_${field.name}_${itemIndex}_${fieldIndex}`\">\n                        <slot name=\"table-row\" :field=\"field.name\" :item=\"item\" :value=\"item[field.name]\">\n                            {{item[field.name]}}\n                        </slot>\n                    </td>\n                </tr>\n            </template>\n            <template v-else>\n                <tr>\n                    <td :colspan=\"fields.length\" class=\"todo-table-nodata\">\n                        Não há dados\n                    </td>\n                </tr>\n            </template>\n        </tbody>\n\n        <!-- Pagination -->\n        <tfoot v-if=\"paginated\">\n            <tr>\n                <td :colspan=\"fields.length\" class=\"todo-table-footer\">\n                    <TodoTablePagination \n                        :currentPage.sync=\"internalCurrentPage\" \n                        :pages=\"pages\" \n                        :pageSize.sync=\"internalPageSize\"\n                        :disabled=\"searched\"\n                    />\n                </td>\n            </tr>\n        </tfoot>\n    </table>\n\n  </div>\n</template>\n\n<script>\nimport TodoInput from '@/components/todo-input/TodoInput';\nimport TodoTablePagination from '@/components/todo-table/TodoTablePagination';\n\nexport default {\n    components: { TodoInput, TodoTablePagination },\n    props: {\n        fields: {\n            type: Array,\n            required: true\n        },\n        items: {\n            type: Array,\n            required: true\n        },\n        searchable: {\n            type: Boolean,\n            default: false\n        },\n        paginated: {\n            type: Boolean,\n            default: false\n        },\n        pageSize: {\n            type: Number,\n            default: 10,\n            validator: (value) => [5, 10, 20].find(size => value === size)\n        }\n    },\n    data() {\n        return {\n            internalSearchTerm: '',\n            internalItems: this.items,\n            internalPageSize: this.pageSize,\n            internalCurrentPage: 1,\n        }\n    },\n    computed: {\n        pages() {\n            return this.internalPageSize != 0 \n                ? Math.ceil(this.items.length / this.internalPageSize)\n                : 1;\n        },\n        searched() {\n            return this.internalSearchTerm != '';\n        },\n        hasData() {\n            return this.internalItems.length > 0;\n        }\n    },\n    watch: {\n        items() {\n            this.updateData();\n        },\n        internalSearchTerm() {\n            this.search();\n        },\n        internalCurrentPage() {\n            this.updateData();\n        },\n        internalPageSize() {\n            this.updateData();\n        }\n    },\n    methods: {\n        updateData() {\n            if (!this.paginated || this.internalPageSize === 0) {\n                this.internalItems = this.items;\n                return;\n            } \n\n            let end = this.internalCurrentPage * this.internalPageSize;\n            let begin = (this.internalCurrentPage * this.internalPageSize) - this.internalPageSize;\n            \n            this.internalItems = this.items.slice(begin, end);\n        },\n        search() {\n            this.internalSearchTerm.length === 0\n                ? this.updateData()\n                : this.internalItems = this.items.filter(item => {\n                    for(let prop in item) {\n                        return new String(item[prop]).toLowerCase()\n                            .includes(this.internalSearchTerm.toLowerCase());\n                    }\n                })\n        },\n        rowClicked(item) {\n            this.$emit('onRowClick', item);\n        }\n    },\n    created() {\n        setTimeout(() => {\n            if (!this.hasData) {\n                this.internalCurrentPage = 0\n            }            \n        }, 100);\n    }\n\n}\n</script>\n\n<style>\n.todo-table-container {\n    display: grid;\n}\n.todo-table {\n    border-collapse: collapse;\n}\n.todo-table thead th {    \n    text-align: center;\n    padding: 10px;\n    background: var(--table-th-color);\n    color: var(--white-color);\n    border-right: 1px solid var(--table-border-color);\n}\n.todo-table thead th:first-child {\n    border-left: 1px solid var(--table-th-color);\n}\n.todo-table thead th:last-child {\n    border-right: 1px solid var(--table-th-color);\n}\n.todo-table tbody tr:hover {\n    background: var(--table-tr-hover-color);\n}\n.todo-table td {\n    border-bottom: 1px solid var(--table-border-color);\n    border-right: 1px solid var(--table-border-color);\n    padding: 10px;\n}\n.todo-table td:last-child {\n    border-right: none;\n}\n.todo-table-nodata {\n    padding: 10px;\n    font-size: 1.2rem;\n    font-weight: bold;\n}\n.todo-table-footer {\n    background: var(--gray-light-color);\n}\n</style>"]}]}
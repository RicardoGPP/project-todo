{"remainingRequest":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/rperandre/other-projects/project-todo/front-end/todo/frontend/src/views/TodoMaintenance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/src/views/TodoMaintenance.vue","mtime":1574442239243},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rperandre/other-projects/project-todo/front-end/todo/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVG9kb1NlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy90b2RvLXNlcnZpY2UuanMnOw0KaW1wb3J0IFRvZG9QYWdlSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy90b2RvLXBhZ2UtaGVhZGVyL1RvZG9QYWdlSGVhZGVyJzsNCmltcG9ydCBUb2RvSW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL3RvZG8taW5wdXQvVG9kb0lucHV0JzsNCmltcG9ydCBUb2RvTWVzc2FnZVNlcnZpY2UgZnJvbSAnQC9jb21wb25lbnRzL3RvZG8tbWVzc2FnZS9Ub2RvTWVzc2FnZVNlcnZpY2UnOw0KaW1wb3J0IFRvZG9Nb2RhbENvbmZpcm0gZnJvbSAnQC9jb21wb25lbnRzL3RvZG8tbW9kYWwvVG9kb01vZGFsQ29uZmlybSc7DQppbXBvcnQgVG9kb01vZGFsU2VydmljZSBmcm9tICdAL2NvbXBvbmVudHMvdG9kby1tb2RhbC9Ub2RvTW9kYWxTZXJ2aWNlJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsgVG9kb1BhZ2VIZWFkZXIsIFRvZG9JbnB1dCwgVG9kb01vZGFsQ29uZmlybSB9LA0KICAgIHByb3BzOiBbJ2lkJ10sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHRhc2s6IHsNCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgdGl0bGUoKSB7DQogICAgICAgICAgICByZXR1cm4gKCF0aGlzLmlkID8gJ0NyaWFyJyA6ICdBbHRlcmFyJykgKyAnIFRhc2snOw0KICAgICAgICB9LA0KICAgICAgICBjb25maXJtTWVzc2FnZSgpIHsNCiAgICAgICAgICAgIHJldHVybiAodGhpcy5pZCA/ICdEZXNlamEgcmVhbG1lbnRlIGFsdGVyYXIgYSB0YXNrPycgOiAnRGVzZWphIHJlYWxtZW50ZSBpbnNlcmlyIGEgdGFzaz8nKTsNCiAgICAgICAgfSwNCiAgICAgICAgbWVzc2FnZUlkKCkgew0KICAgICAgICAgICAgcmV0dXJuICd0b2RvSW5zZXJ0VXBkYXRlJzsNCiAgICAgICAgfSwNCiAgICAgICAgaWRTYXZlQ29uZmlybSgpIHsNCiAgICAgICAgICAgIHJldHVybiAnc2F2ZVRhc2tDb25maXJtJw0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIHNhdmVUYXNrKCkgew0KICAgICAgICAgICAgVG9kb01vZGFsU2VydmljZS5vcGVuKHRoaXMuaWRTYXZlQ29uZmlybSk7DQogICAgICAgIH0sDQogICAgICAgIGNvbmZpcm1TYXZlVGFzaygpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy50YXNrLmRlc2NyaXB0aW9uKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoJ0Rlc2NyacOnw6NvIG7Do28gaW5mb3JtYWRhJykNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghdGhpcy5pZCkgew0KICAgICAgICAgICAgICAgIFRvZG9TZXJ2aWNlLmNyZWF0ZSh7DQogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50YXNrLmRlc2NyaXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrLmRlc2NyaXB0aW9uID0gJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBUb2RvTWVzc2FnZVNlcnZpY2Uuc3VjY2Vzcyh0aGlzLm1lc3NhZ2VJZCwgJ1Rhc2sgY3JpYWRhIGNvbSBzdWNlc3NvJykNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IFRvZG9NZXNzYWdlU2VydmljZS5lcnJvcih0aGlzLm1lc3NhZ2VJZCwgJ0Vycm8gYW8gaW5zZXJpciBhIHRhc2snKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIFRvZG9TZXJ2aWNlLnVwZGF0ZSh7DQogICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLA0KICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50YXNrLmRlc2NyaXB0aW9uLA0KICAgICAgICAgICAgICAgICAgICBkb25lOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiAgVG9kb01lc3NhZ2VTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5tZXNzYWdlSWQsICdUYXNrIGFsdGVyYWRhIGNvbSBzdWNlc3NvJykpDQogICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IFRvZG9NZXNzYWdlU2VydmljZS5lcnJvcih0aGlzLm1lc3NhZ2VJZCwgJ0Vycm8gYW8gYWx0ZXJhciBhIHRhc2snKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGJhY2tUb0xpc3QoKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICd0b2RvLWxpc3QnfSkNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgaWYgKHRoaXMuaWQpIHsNCiAgICAgICAgICAgIFRvZG9TZXJ2aWNlLmZpbmQodGhpcy5pZCkNCiAgICAgICAgICAgICAgICAudGhlbih0YXNrID0+IHRoaXMudGFzay5kZXNjcmlwdGlvbiA9IHRhc2suZGVzY3JpcHRpb24pDQogICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IFRvZG9NZXNzYWdlU2VydmljZS5lcnJvcih0aGlzLm1lc3NhZ2VJZCwgJ0Vycm8gYW8gY2FycmVnYXIgYSB0YXNrJykpOw0KICAgICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["TodoMaintenance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TodoMaintenance.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <section class=\"maintain-container\">\r\n\r\n        <TodoMessage \r\n            :id=\"messageId\" \r\n        />\r\n\r\n        <TodoPageHeader \r\n            :title=\"title\" \r\n        />\r\n\r\n        <form @submit.prevent=\"saveTask\" class=\"maintain-form\">\r\n            <TodoInput \r\n                id=\"description\" \r\n                :value.sync=\"task.description\" \r\n                placeholder=\"Descrição\"\r\n            />\r\n\r\n            <div class=\"maintain-actions\">\r\n                <TodoButton \r\n                    label=\"Voltar\"\r\n                    @onClick=\"backToList\"\r\n                    icon=\"arrow-left\"\r\n                />\r\n\r\n                <TodoButton \r\n                    submit\r\n                    label=\"Confirmar\" \r\n                    icon=\"check\"\r\n                />                \r\n            </div>\r\n        </form>\r\n\r\n        <TodoModalConfirm \r\n            :id=\"idSaveConfirm\"\r\n            :title=\"title\"\r\n            :message=\"confirmMessage\"\r\n            labelOk=\"Sim\"\r\n            labelCancel=\"Não\"            \r\n            @onOk=\"confirmSaveTask\"\r\n        />\r\n\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport TodoService from '@/services/todo-service.js';\r\nimport TodoPageHeader from '@/components/todo-page-header/TodoPageHeader';\r\nimport TodoInput from '@/components/todo-input/TodoInput';\r\nimport TodoMessageService from '@/components/todo-message/TodoMessageService';\r\nimport TodoModalConfirm from '@/components/todo-modal/TodoModalConfirm';\r\nimport TodoModalService from '@/components/todo-modal/TodoModalService';\r\n\r\nexport default {\r\n    components: { TodoPageHeader, TodoInput, TodoModalConfirm },\r\n    props: ['id'],\r\n    data() {\r\n        return {\r\n            task: {\r\n                description: ''\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        title() {\r\n            return (!this.id ? 'Criar' : 'Alterar') + ' Task';\r\n        },\r\n        confirmMessage() {\r\n            return (this.id ? 'Deseja realmente alterar a task?' : 'Deseja realmente inserir a task?');\r\n        },\r\n        messageId() {\r\n            return 'todoInsertUpdate';\r\n        },\r\n        idSaveConfirm() {\r\n            return 'saveTaskConfirm'\r\n        }\r\n    },\r\n    methods: {\r\n        saveTask() {\r\n            TodoModalService.open(this.idSaveConfirm);\r\n        },\r\n        confirmSaveTask() {\r\n            if (!this.task.description) {\r\n                alert('Descrição não informada')\r\n                return;\r\n            }\r\n\r\n            if (!this.id) {\r\n                TodoService.create({\r\n                        description: this.task.description,\r\n                        done: false\r\n                    })\r\n                    .then(() => {\r\n                        this.task.description = '';\r\n                        TodoMessageService.success(this.messageId, 'Task criada com sucesso')\r\n                    })\r\n                    .catch(() => TodoMessageService.error(this.messageId, 'Erro ao inserir a task'));\r\n            } else {\r\n                TodoService.update({\r\n                    id: this.id,\r\n                    description: this.task.description,\r\n                    done: false                    \r\n                })\r\n                .then(() =>  TodoMessageService.success(this.messageId, 'Task alterada com sucesso'))\r\n                .catch(() => TodoMessageService.error(this.messageId, 'Erro ao alterar a task'));\r\n            }\r\n        },\r\n        backToList() {\r\n            this.$router.push({ name: 'todo-list'})\r\n        }\r\n    },\r\n    created() {\r\n        if (this.id) {\r\n            TodoService.find(this.id)\r\n                .then(task => this.task.description = task.description)\r\n                .catch(() => TodoMessageService.error(this.messageId, 'Erro ao carregar a task'));\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.maintain-container {\r\n    display: grid;\r\n    border: 1px solid lightgray;\r\n    border-radius: 4px;\r\n    padding: 20px;\r\n}\r\n.maintain-form {\r\n    display: grid;\r\n}\r\n.maintain-actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n    margin-top: 20px;\r\n}\r\n.maintain-actions button {\r\n    width: 150px;\r\n    margin-left: 10px;\r\n}\r\n</style>\r\n"]}]}